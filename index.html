<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles/main.css">
    <title>Jobster</title>
    <script>
        // Check authentication
        if (!localStorage.getItem('isLoggedIn')) {
            window.location.href = 'login.html';
        }
    </script>
    <style>
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .fade-in-up {
            opacity: 0;
            animation: fadeInUp 1s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
        }

        /* Add initial opacity 0 to entire dashboard */
        #dashboard-container {
            opacity: 0;
            animation: fadeIn 1s ease-out forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .delay-100 { animation-delay: 200ms; }
        .delay-200 { animation-delay: 400ms; }
        .delay-300 { animation-delay: 600ms; }

        /* Add smooth transition for dark mode */
        * {
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        
        /* Exclude certain properties from transition to prevent lag */
        .no-transition {
            transition: none !important;
        }
        
        /* Optimize transitions for specific elements */
        .bg-white, .bg-gray-100, .bg-gray-200, .bg-gray-800 {
            transition: background-color 0.3s ease;
        }

        /* Enhanced dropdown styling */
        .dropdown-menu {
            z-index: 50;
            position: absolute;
            transform-origin: top right;
            transition: transform 0.1s ease-out, opacity 0.1s ease-out;
        }

        .dropdown-menu.show-above {
            bottom: 100%;
            margin-bottom: 0.5rem;
        }

        .dropdown-menu.show-below {
            top: 100%;
            margin-top: 0.5rem;
        }

        .dropdown-menu.hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-black flex justify-center h-screen bg-gradient-to-br from-[#0f1022] via-[#0c0d1b] to-[#060711]">
    <div id="dashboard-container" class="flex flex-col w-11/12 space-y-4 my-8">
        <!-- Header Section -->
        <div class="relative flex h-20 rounded-md items-center justify-between overflow-hidden bg-purple-900 px-4 fade-in-up">
            <h1 class="relative z-10 font-medium text-2xl subpixel-antialiased text-white">Jobster_</h1>
            <div class="flex items-center gap-4">
                <button id="logoutBtn" class="relative z-10 px-4 py-2 bg-purple-700 text-white rounded-md hover:bg-purple-600">
                    Logout
                </button>
                <button id="darkModeToggle" class="relative z-10 px-4 py-2 bg-purple-700 text-white rounded-md hover:bg-purple-600">
                    Toggle Dark Mode
                </button>
            </div>
        </div>
        
        <!-- System Health Section -->
        <div class="flex bg-white h-[30%] rounded-md p-4 fade-in-up delay-100">
            <div class="flex w-full gap-4">
                <!-- Left Side - Circle Health Indicator -->
                <div class="flex-none w-48 flex items-center justify-center">
                    <div class="relative">
                        <!-- Circular Progress -->
                        <svg class="w-36 h-36 transform -rotate-90">
                            <circle
                                class="text-gray-200"
                                stroke-width="6"
                                stroke="currentColor"
                                fill="transparent"
                                r="60"
                                cx="72"
                                cy="72"
                            />
                            <circle
                                class="text-green-500 circle-progress"
                                stroke-width="6"
                                stroke="currentColor"
                                fill="transparent"
                                r="60"
                                cx="72"
                                cy="72"
                                stroke-dasharray="376.8"
                            />
                        </svg>
                        <div class="absolute inset-0 flex flex-col items-center justify-center">
                            <span class="text-3xl font-bold text-gray-800">92%</span>
                            <span class="text-sm font-medium text-gray-500">Health</span>
                        </div>
                    </div>
                </div>

                <!-- Right Side - Stats -->
                <div class="flex-1">
                    <div class="flex justify-between items-center mb-2">
                        <h2 class="text-lg font-semibold text-gray-800">System Health</h2>
                        <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-green-100 text-green-800">All Systems Operational</span>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-2 mb-2">
                        <!-- CPU Usage -->
                        <div class="bg-gray-200 rounded-lg p-2 shadow-sm">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-xs font-medium text-gray-500">CPU Usage</span>
                                <span class="text-xs font-bold text-gray-700">45%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5">
                                <div class="bg-blue-500 h-1.5 rounded-full metric-progress" style="--progress: 45%"></div>
                            </div>
                        </div>

                        <!-- Memory Usage -->
                        <div class="bg-gray-200 rounded-lg p-2 shadow-sm">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-xs font-medium text-gray-500">Memory Usage</span>
                                <span class="text-xs font-bold text-gray-700">68%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-1.5">
                                <div class="bg-purple-500 h-1.5 rounded-full metric-progress" style="--progress: 68%"></div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-4 gap-2">
                        <!-- Stats -->
                        <div class="bg-gray-200 rounded-lg p-2 shadow-sm">
                            <div class="text-base font-bold text-gray-800">246</div>
                            <div class="text-xs text-gray-500">Total Jobs</div>
                        </div>
                        <div class="bg-gray-200 rounded-lg p-2 shadow-sm">
                            <div class="text-base font-bold text-green-600">12</div>
                            <div class="text-xs text-gray-500">Running</div>
                        </div>
                        <div class="bg-gray-200 rounded-lg p-2 shadow-sm">
                            <div class="text-base font-bold text-red-600">8</div>
                            <div class="text-xs text-gray-500">Failed</div>
                        </div>
                        <div class="bg-gray-200 rounded-lg p-2 shadow-sm">
                            <div class="text-base font-bold text-blue-600">226</div>
                            <div class="text-xs text-gray-500">Completed</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Job Status Table Section-->
        <div class="flex flex-col bg-gray-200 h-[calc(70%-1rem)] rounded-md overflow-hidden fade-in-up delay-200">
            <div class="w-full">
                <div class="bg-gray-800 text-gray-200 px-6 py-3 font-medium flex justify-between items-center">
                    <span>Active Jobs</span>
                    <input type="text" id="jobSearch" placeholder="Search jobs..." class="px-3 py-1 rounded-md bg-gray-700 text-white">
                </div>
                <div class="overflow-auto h-[calc(100%-48px)]">
                    <table class="min-w-full divide-y divide-gray-300">
                        <thead class="bg-gray-100 sticky top-0">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]">Job ID</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]">Status</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[20%]">Type</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]">Started</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-[20%]">Progress</th>
                                <th scope="col" class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-[15%]">&nbsp;&nbsp;&nbsp;&nbsp;Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500">#JOB-001</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Running</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Data Processing</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2m ago</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: 45%"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 flex justify-center">
                                    <div class="relative inline-block text-left">
                                        <button class="p-2.5 rounded-full hover:bg-gray-100 flex items-center justify-center" onclick="handleDropdownClick(event)">
                                            <svg class="w-7 h-7 text-gray-500" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                                            </svg>
                                        </button>
                                        <div class="dropdown-menu hidden absolute right-0 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5" style="min-width: 180px;">
                                            <div class="py-1">
                                                <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">View Details</button>
                                                <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Pause Job</button>
                                                <button class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Cancel Job</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500">#JOB-002</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Pending</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ML Training</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">5m ago</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-yellow-600 h-2.5 rounded-full" style="width: 25%"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 flex justify-center">
                                    <div class="relative inline-block text-left">
                                        <button class="p-2.5 rounded-full hover:bg-gray-100 flex items-center justify-center" onclick="handleDropdownClick(event)">
                                            <svg class="w-7 h-7 text-gray-500" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                                            </svg>
                                        </button>
                                        <div class="dropdown-menu hidden absolute right-0 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5" style="min-width: 180px;">
                                            <div class="py-1">
                                                <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">View Details</button>
                                                <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Pause Job</button>
                                                <button class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Cancel Job</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-500">#JOB-003</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm">
                                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Failed</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Data Import</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">10m ago</td>
                                <td class="px-6 py-4 whitespace-nowrap">
                                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                                        <div class="bg-red-600 h-2.5 rounded-full" style="width: 80%"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 flex justify-center">
                                    <div class="relative inline-block text-left">
                                        <button class="p-2.5 rounded-full hover:bg-gray-100 flex items-center justify-center" onclick="handleDropdownClick(event)">
                                            <svg class="w-7 h-7 text-gray-500" fill="currentColor" viewBox="0 0 24 24">
                                                <path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
                                            </svg>
                                        </button>
                                        <div class="dropdown-menu hidden absolute right-0 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5" style="min-width: 180px;">
                                            <div class="py-1">
                                                <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">View Details</button>
                                                <button class="block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Pause Job</button>
                                                <button class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Cancel Job</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- Add more rows as needed -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="js/UIManager.js"></script>
<script src="js/JobManager.js"></script>
<script>
    const jobManager = new JobManager();
    const sampleJobs = [    event.stopPropagation();
        { id: "JOB-001", status: "Running", type: "Data Processing", started: "2m ago", progress: 45 },t;
        { id: "JOB-002", status: "Pending", type: "ML Training", started: "5m ago", progress: 25 },ton.nextElementSibling;
        { id: "JOB-003", status: "Failed", type: "Data Import", started: "10m ago", progress: 80 }
    ];
    jobManager.init(sampleJobs);
</script>
</html>